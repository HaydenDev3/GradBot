<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graduation Bot - Advanced Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
    <style>
        body {
            background: #2f3136;
            color: #dcddde;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            overflow-x: hidden;
        }
        
        .sidebar {
            background: #2f3136;
            border-right: 1px solid #4f545c;
            height: 100vh;
            position: fixed;
            width: 250px;
            overflow-y: auto;
        }
        
        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid #4f545c;
            text-align: center;
        }
        
        .sidebar-header h4 {
            color: #ffffff;
            margin: 0;
            font-weight: 600;
        }
        
        .sidebar-menu {
            padding: 20px 0;
        }
        
        .menu-item {
            display: block;
            color: #b9bbbe;
            text-decoration: none;
            padding: 12px 20px;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }
        
        .menu-item:hover, .menu-item.active {
            background: #40444b;
            color: #ffffff;
            border-left-color: #5865f2;
        }
        
        .main-content {
            margin-left: 250px;
            padding: 20px;
            min-height: 100vh;
        }
        
        .top-bar {
            background: #36393f;
            padding: 15px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: flex;
            justify-content: between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .welcome-text {
            color: #ffffff;
            font-size: 18px;
            font-weight: 500;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: #36393f;
            border: 1px solid #4f545c;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: transform 0.2s;
            height: 200px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
        }
        
        .stat-icon {
            font-size: 36px;
            margin-bottom: 15px;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #b9bbbe;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .activity-feed {
            background: #36393f;
            border: 1px solid #4f545c;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .activity-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .activity-header h5 {
            color: #ffffff;
            margin: 0;
            margin-left: 10px;
        }
        
        .activity-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #4f545c;
        }
        
        .activity-item:last-child {
            border-bottom: none;
        }
        
        .activity-icon {
            width: 40px;
            height: 40px;
            background: #5865f2;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
        }
        
        .activity-content {
            flex: 1;
        }
        
        .activity-title {
            color: #ffffff;
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .activity-time {
            color: #72767d;
            font-size: 12px;
        }
        
        .btn-discord {
            background: #5865f2;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        
        .btn-discord:hover {
            background: #4752c4;
            color: white;
        }
        
        .btn-danger-discord {
            background: #ed4245;
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .btn-danger-discord:hover {
            background: #c53030;
            color: white;
        }
        
        .countdown-container {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .countdown-item {
            text-align: center;
            background: #2f3136;
            border: 2px solid #5865f2;
            border-radius: 12px;
            padding: 20px 15px;
            min-width: 100px;
            transition: all 0.3s ease;
        }
        
        .countdown-item:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(88, 101, 242, 0.3);
        }
        
        .countdown-number {
            font-size: 32px;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 5px;
            font-family: 'Courier New', monospace;
            text-shadow: 0 0 10px rgba(88, 101, 242, 0.5);
        }
        
        .countdown-label {
            color: #b9bbbe;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 500;
        }
        
        .live-clock {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #5865f2, #4752c4);
            border-radius: 10px;
        }
        
        .current-time {
            font-size: 24px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 5px;
            font-family: 'Courier New', monospace;
        }
        
        .graduation-time {
            color: #dcddde;
            font-size: 14px;
            opacity: 0.9;
        }
        
        .countdown-number.pulse {
            animation: pulse 1s ease-in-out;
        }
        
        .progress-ring {
            width: 120px;
            height: 120px;
            margin: 0 auto 15px;
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.5s ease-in-out;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 16px;
            font-weight: 700;
            color: #ffffff;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }
        
        .metric-trend {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
        }
        
        .trend-up {
            color: #28a745;
        }
        
        .trend-down {
            color: #dc3545;
        }
        
        .trend-neutral {
            color: #6c757d;
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #dc3545;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .weather-widget {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            border-radius: 12px;
            padding: 20px;
            color: white;
            margin-bottom: 20px;
        }
        
        .milestone-progress {
            background: #36393f;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #5865f2;
        }
        
        .milestone-bar {
            background: #2f3136;
            height: 8px;
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .milestone-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #5865f2, #7289da);
            transition: width 0.5s ease;
        }
        
        .quick-action-btn {
            background: #40444b;
            border: 1px solid #5865f2;
            color: #ffffff;
            padding: 12px 20px;
            border-radius: 8px;
            margin: 5px;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .quick-action-btn:hover {
            background: #5865f2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(88, 101, 242, 0.3);
        }
        
        .performance-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .indicator-excellent {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
            border: 1px solid #28a745;
        }
        
        .indicator-good {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
            border: 1px solid #ffc107;
        }
        
        .indicator-warning {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
            border: 1px solid #dc3545;
        }
        
        .mini-chart {
            width: 100% !important;
            height: 60px !important;
            max-height: 60px !important;
            max-width: 100% !important;
            overflow: hidden;
        }
        
        .chart-container {
            position: relative;
            height: 60px !important;
            max-height: 60px !important;
            width: 100% !important;
            max-width: 100% !important;
            overflow: hidden;
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }
            .sidebar.show {
                transform: translateX(0);
            }
            .main-content {
                margin-left: 0;
            }
            .countdown-container {
                justify-content: center;
            }
            .countdown-number {
                font-size: 24px;
            }
            .current-time {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-graduation-cap" style="font-size: 24px; color: #5865f2; margin-bottom: 10px;"></i>
            <h4>Graduation Bot</h4>
            <small class="text-muted">Admin Dashboard</small>
        </div>
        
        <div class="sidebar-menu">
            <a href="#" class="menu-item active" onclick="showSection('overview')">
                <i class="fas fa-chart-line me-3"></i>
                Overview
            </a>
            <a href="#" class="menu-item" onclick="showSection('analytics')">
                <i class="fas fa-chart-bar me-3"></i>
                Analytics
            </a>
            <a href="#" class="menu-item" onclick="showSection('goals')">
                <i class="fas fa-target me-3"></i>
                Goals & Progress
            </a>
            <a href="#" class="menu-item" onclick="showSection('study')">
                <i class="fas fa-book me-3"></i>
                Study Sessions
            </a>
            <a href="#" class="menu-item" onclick="showSection('milestones')">
                <i class="fas fa-trophy me-3"></i>
                Milestones
            </a>
            <a href="#" class="menu-item" onclick="showSection('calendar')">
                <i class="fas fa-calendar me-3"></i>
                Calendar & Events
            </a>
            <a href="#" class="menu-item" onclick="showSection('settings')">
                <i class="fas fa-cog me-3"></i>
                Settings
            </a>
            <a href="#" class="menu-item" onclick="showSection('logs')">
                <i class="fas fa-file-alt me-3"></i>
                Activity Logs
            </a>
        </div>
        
        <div style="position: absolute; bottom: 20px; left: 20px; right: 20px;">
            <div class="text-center mb-3">
                <small class="text-muted">Logged in as</small><br>
                <strong class="text-white"><%= username %></strong>
            </div>
            <form method="POST" action="/logout">
                <button type="submit" class="btn btn-danger-discord w-100">
                    <i class="fas fa-sign-out-alt me-2"></i>
                    Logout
                </button>
            </form>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="top-bar">
            <div class="welcome-text">
                <i class="fas fa-tachometer-alt me-2"></i>
                Advanced Dashboard Overview
                <div style="font-size: 14px; color: #b9bbbe; margin-top: 5px;">
                    Last updated: <span id="last-updated">--</span>
                </div>
            </div>
            <div class="d-flex gap-2">
                <button class="btn btn-discord" onclick="refreshStats()">
                    <i class="fas fa-sync-alt me-2"></i>
                    Refresh
                </button>
                <button class="btn btn-discord" onclick="exportData()">
                    <i class="fas fa-download me-2"></i>
                    Export
                </button>
            </div>
        </div>
        
        <!-- Overview Section -->
        <div id="overview-section">
            <!-- Quick Actions -->
            <div class="activity-feed mb-4">
                <div class="activity-header">
                    <i class="fas fa-bolt" style="color: #f7b731;"></i>
                    <h5>Quick Actions</h5>
                </div>
                <div class="text-center">
                    <button class="quick-action-btn" onclick="sendMotivationMessage()">
                        <i class="fas fa-paper-plane"></i>
                        Send Motivation
                    </button>
                    <button class="quick-action-btn" onclick="checkMilestones()">
                        <i class="fas fa-search"></i>
                        Check Milestones
                    </button>
                    <button class="quick-action-btn" onclick="generateReport()">
                        <i class="fas fa-chart-pie"></i>
                        Generate Report
                    </button>
                    <button class="quick-action-btn" onclick="backupData()">
                        <i class="fas fa-shield-alt"></i>
                        Backup Data
                    </button>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon" style="color: #ff6b6b;">
                        <i class="fas fa-calendar-day"></i>
                    </div>
                    <div class="stat-value" id="days-left">-</div>
                    <div class="stat-label">Days Until Graduation</div>
                    <div class="metric-trend">
                        <i class="fas fa-arrow-down trend-down"></i>
                        <span class="trend-down">1 day closer</span>
                    </div>
                    <div class="progress-ring">
                        <svg class="progress-ring">
                            <circle class="progress-ring-circle" stroke="#ff6b6b" stroke-width="4" fill="transparent" r="50" cx="60" cy="60" id="days-progress"/>
                        </svg>
                        <div class="progress-text" id="days-percentage">-</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="color: #4ecdc4;">
                        <i class="fas fa-school"></i>
                    </div>
                    <div class="stat-value" id="school-days">-</div>
                    <div class="stat-label">School Days Remaining</div>
                    <div class="metric-trend">
                        <i class="fas fa-calendar-check trend-neutral"></i>
                        <span>Active tracking</span>
                    </div>
                    <canvas class="mini-chart" id="school-days-chart" width="280" height="60"></canvas>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="color: #45b7d1;">
                        <i class="fas fa-calendar-week"></i>
                    </div>
                    <div class="stat-value" id="weeks-left">-</div>
                    <div class="stat-label">Weeks Remaining</div>
                    <div class="performance-indicator indicator-excellent">
                        <i class="fas fa-check-circle"></i>
                        On Track
                    </div>
                    <canvas class="mini-chart" id="weeks-chart" width="280" height="60"></canvas>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="color: #f7b731;">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="stat-value" id="months-left">-</div>
                    <div class="stat-label">Months Remaining</div>
                    <div class="metric-trend">
                        <i class="fas fa-clock trend-up"></i>
                        <span class="trend-up">Time management</span>
                    </div>
                </div>

                <!-- New Advanced Stats -->
                <div class="stat-card">
                    <div class="stat-icon" style="color: #a55eea;">
                        <i class="fas fa-percentage"></i>
                    </div>
                    <div class="stat-value" id="completion-percentage">-</div>
                    <div class="stat-label">Journey Completed</div>
                    <div class="performance-indicator indicator-good">
                        <i class="fas fa-trending-up"></i>
                        Progressing
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="color: #26de81;">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    <div class="stat-value" id="motivation-score">-</div>
                    <div class="stat-label">Motivation Score</div>
                    <div class="metric-trend">
                        <i class="fas fa-arrow-up trend-up"></i>
                        <span class="trend-up">+5 this week</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="color: #fd79a8;">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div class="stat-value" id="streak-days">-</div>
                    <div class="stat-label">Study Streak</div>
                    <div class="performance-indicator indicator-excellent">
                        <i class="fas fa-medal"></i>
                        Hot Streak!
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="color: #fd9644;">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="stat-value" id="readiness-score">-</div>
                    <div class="stat-label">Graduation Readiness</div>
                    <div class="performance-indicator indicator-excellent" id="readiness-indicator">
                        <i class="fas fa-star"></i>
                        Excellent
                    </div>
                </div>
            </div>
            
            <!-- Weather Widget -->
            <div class="weather-widget">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6><i class="fas fa-cloud-sun me-2"></i>Brisbane Weather</h6>
                        <div class="h4 mb-0" id="weather-temp">Loading...</div>
                        <small id="weather-desc">Checking conditions...</small>
                    </div>
                    <div class="text-end">
                        <i class="fas fa-sun" style="font-size: 48px; opacity: 0.7;"></i>
                        <div><small id="weather-humidity">Humidity: --</small></div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Live Countdown Clock -->
            <div class="activity-feed mb-4">
                <div class="activity-header">
                    <i class="fas fa-clock" style="color: #5865f2;"></i>
                    <h5>Precision Countdown Timer</h5>
                    <span class="notification-badge" id="countdown-notification">!</span>
                </div>
                
                <div class="countdown-container">
                    <div class="countdown-item">
                        <div class="countdown-number" id="live-days">-</div>
                        <div class="countdown-label">Days</div>
                        <small class="text-muted">To Freedom</small>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-number" id="live-hours">-</div>
                        <div class="countdown-label">Hours</div>
                        <small class="text-muted">Remaining</small>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-number" id="live-minutes">-</div>
                        <div class="countdown-label">Minutes</div>
                        <small class="text-muted">Left</small>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-number" id="live-seconds">-</div>
                        <div class="countdown-label">Seconds</div>
                        <small class="text-muted">Ticking</small>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-number" id="live-milliseconds">-</div>
                        <div class="countdown-label">MS</div>
                        <small class="text-muted">Precision</small>
                    </div>
                </div>
                
                <div class="live-clock">
                    <div class="current-time" id="current-time">--:--:-- --</div>
                    <div class="graduation-time">
                        🎓 Target: November 21st, 2025 at 12:00 PM (Brisbane Time)
                    </div>
                    <div class="mt-2">
                        <small>Timezone: <span id="current-timezone">Australia/Brisbane</span></small>
                    </div>
                </div>
            </div>

            <!-- Progress Analytics -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="activity-feed">
                        <div class="activity-header">
                            <i class="fas fa-chart-line" style="color: #26de81;"></i>
                            <h5>Progress Analytics</h5>
                        </div>
                        <div class="chart-container">
                            <canvas id="progressChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="activity-feed">
                        <div class="activity-header">
                            <i class="fas fa-trophy" style="color: #f7b731;"></i>
                            <h5>Milestone Progress</h5>
                        </div>
                        
                        <div class="milestone-progress">
                            <div class="d-flex justify-content-between">
                                <span>Next Milestone: 100 Days</span>
                                <span id="milestone-percentage">78%</span>
                            </div>
                            <div class="milestone-bar">
                                <div class="milestone-bar-fill" style="width: 78%"></div>
                            </div>
                            <small class="text-muted">22 days until next celebration</small>
                        </div>

                        <div class="milestone-progress">
                            <div class="d-flex justify-content-between">
                                <span>Academic Year Progress</span>
                                <span>85%</span>
                            </div>
                            <div class="milestone-bar">
                                <div class="milestone-bar-fill" style="width: 85%"></div>
                            </div>
                            <small class="text-muted">Strong academic performance</small>
                        </div>

                        <div class="milestone-progress">
                            <div class="d-flex justify-content-between">
                                <span>Study Goal Completion</span>
                                <span id="study-goal-percentage">92%</span>
                            </div>
                            <div class="milestone-bar">
                                <div class="milestone-bar-fill" style="width: 92%"></div>
                            </div>
                            <small class="text-muted">Excellent study habits!</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Activity Feed -->
            <div class="activity-feed">
                <div class="activity-header">
                    <i class="fas fa-history" style="color: #5865f2;"></i>
                    <h5>Real-time Activity Feed</h5>
                    <button class="btn btn-sm btn-discord" onclick="refreshActivity()">
                        <i class="fas fa-refresh"></i>
                    </button>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon" style="background: #26de81;">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Bot System Online & Optimized</div>
                        <div class="activity-time">All systems operational - Performance: 99.9%</div>
                    </div>
                    <div class="performance-indicator indicator-excellent">
                        <i class="fas fa-check"></i> Optimal
                    </div>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon" style="background: #5865f2;">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Daily Countdown Scheduled</div>
                        <div class="activity-time">Next motivation message at 6:00 AM Brisbane time</div>
                    </div>
                    <div class="performance-indicator indicator-good">
                        <i class="fas fa-clock"></i> Scheduled
                    </div>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon" style="background: #f7b731;">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Milestone Tracking Active</div>
                        <div class="activity-time">Monitoring 13 graduation milestones</div>
                    </div>
                    <div class="performance-indicator indicator-excellent">
                        <i class="fas fa-star"></i> Active
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon" style="background: #fd79a8;">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">AI Analytics Processing</div>
                        <div class="activity-time">Analyzing study patterns and performance metrics</div>
                    </div>
                    <div class="performance-indicator indicator-good">
                        <i class="fas fa-cog"></i> Processing
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon" style="background: #a55eea;">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Automated Backup Completed</div>
                        <div class="activity-time">Data safely backed up - Last backup: 2 hours ago</div>
                    </div>
                    <div class="performance-indicator indicator-excellent">
                        <i class="fas fa-check-circle"></i> Secure
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Section -->
        <div id="analytics-section" style="display: none;">
            <div class="row">
                <div class="col-md-8">
                    <div class="activity-feed mb-4">
                        <div class="activity-header">
                            <i class="fas fa-chart-area" style="color: #26de81;"></i>
                            <h5>Performance Analytics</h5>
                        </div>
                        <div class="chart-container">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="activity-feed mb-4">
                        <div class="activity-header">
                            <i class="fas fa-pie-chart" style="color: #fd79a8;"></i>
                            <h5>Time Distribution</h5>
                        </div>
                        <div class="chart-container">
                            <canvas id="timeDistributionChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Goals Section -->
        <div id="goals-section" style="display: none;">
            <div class="activity-feed">
                <div class="activity-header">
                    <i class="fas fa-target" style="color: #5865f2;"></i>
                    <h5>Goals Management</h5>
                    <button class="btn btn-sm btn-discord" onclick="addNewGoal()">
                        <i class="fas fa-plus"></i> Add Goal
                    </button>
                </div>
                <div id="goals-container">
                    <!-- Goals will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Study Sessions Section -->
        <div id="study-section" style="display: none;">
            <div class="activity-feed">
                <div class="activity-header">
                    <i class="fas fa-book" style="color: #4ecdc4;"></i>
                    <h5>Study Session Analytics</h5>
                </div>
                <div class="chart-container">
                    <canvas id="studyChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Milestones Section -->
        <div id="milestones-section" style="display: none;">
            <div class="activity-feed">
                <div class="activity-header">
                    <i class="fas fa-trophy" style="color: #f7b731;"></i>
                    <h5>Milestone Tracker</h5>
                </div>
                <div id="milestones-container">
                    <!-- Milestones will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Calendar Section -->
        <div id="calendar-section" style="display: none;">
            <div class="activity-feed">
                <div class="activity-header">
                    <i class="fas fa-calendar" style="color: #a55eea;"></i>
                    <h5>Academic Calendar</h5>
                </div>
                <div id="calendar-container">
                    <!-- Calendar will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Settings Section -->
        <div id="settings-section" style="display: none;">
            <div class="activity-feed">
                <div class="activity-header">
                    <i class="fas fa-cog" style="color: #fd9644;"></i>
                    <h5>Bot Configuration</h5>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <h6>Notification Settings</h6>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="dailyNotifications" checked>
                            <label class="form-check-label" for="dailyNotifications">
                                Daily countdown notifications
                            </label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="milestoneAlerts" checked>
                            <label class="form-check-label" for="milestoneAlerts">
                                Milestone achievement alerts
                            </label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6>Display Preferences</h6>
                        <div class="mb-2">
                            <label for="timeFormat" class="form-label">Time Format</label>
                            <select class="form-select" id="timeFormat">
                                <option value="12">12-hour</option>
                                <option value="24">24-hour</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Logs Section -->
        <div id="logs-section" style="display: none;">
            <div class="activity-feed">
                <div class="activity-header">
                    <i class="fas fa-file-alt" style="color: #72767d;"></i>
                    <h5>System Activity Logs</h5>
                    <button class="btn btn-sm btn-discord" onclick="clearLogs()">
                        <i class="fas fa-trash"></i> Clear
                    </button>
                </div>
                <div id="logs-container" style="max-height: 400px; overflow-y: auto;">
                    <!-- Logs will be loaded here -->
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Load stats on page load
        window.addEventListener('load', refreshStats);
        
        function refreshStats() {
            fetch('/api/stats')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('days-left').textContent = data.daysLeft;
                    document.getElementById('school-days').textContent = data.schoolDays;
                    document.getElementById('weeks-left').textContent = data.weeks;
                    document.getElementById('months-left').textContent = data.months;
                })
                .catch(error => {
                    console.error('Error fetching stats:', error);
                });
        }
        
        function showSection(section) {
            // Hide all sections
            const sections = ['overview', 'analytics', 'goals', 'study', 'milestones', 'calendar', 'settings', 'logs'];
            sections.forEach(s => {
                document.getElementById(s + '-section').style.display = 'none';
            });
            
            // Remove active class from all menu items
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Add active class to clicked item
            event.target.classList.add('active');
            
            // Show the selected section
            document.getElementById(section + '-section').style.display = 'block';
            
            // Here you could implement section switching
            console.log('Switching to section:', section);
        }
        
        // Live countdown functionality
        function updateLiveCountdown() {
            const now = new Date();
            const graduationDate = new Date('2025-11-21T12:00:00'); // November 21st, 2025 at noon
            
            const timeDiff = graduationDate.getTime() - now.getTime();
            
            if (timeDiff > 0) {
                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
                
                // Update countdown display
                document.getElementById('live-days').textContent = days;
                document.getElementById('live-hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('live-minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('live-seconds').textContent = seconds.toString().padStart(2, '0');
                
                // Add pulse animation to seconds
                const secondsElement = document.getElementById('live-seconds');
                secondsElement.classList.add('pulse');
                setTimeout(() => secondsElement.classList.remove('pulse'), 500);
            } else {
                // Graduation day reached!
                document.getElementById('live-days').textContent = '0';
                document.getElementById('live-hours').textContent = '00';
                document.getElementById('live-minutes').textContent = '00';
                document.getElementById('live-seconds').textContent = '00';
            }
            
            // Update current time
            const timeOptions = {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true,
                timeZone: 'Australia/Brisbane'
            };
            document.getElementById('current-time').textContent = now.toLocaleTimeString('en-AU', timeOptions);
        }
        
        // Start live countdown
        updateLiveCountdown();
        setInterval(updateLiveCountdown, 1000);
        
        // Enhanced countdown with milliseconds
        function updateEnhancedCountdown() {
            const now = new Date();
            const graduationDate = new Date('2025-11-21T12:00:00');
            
            const timeDiff = graduationDate.getTime() - now.getTime();
            
            if (timeDiff > 0) {
                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
                const milliseconds = Math.floor((timeDiff % 1000) / 10); // Show 2 decimal places
                
                // Update countdown display
                document.getElementById('live-days').textContent = days;
                document.getElementById('live-hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('live-minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('live-seconds').textContent = seconds.toString().padStart(2, '0');
                document.getElementById('live-milliseconds').textContent = milliseconds.toString().padStart(2, '0');
                
                // Update progress ring for days
                const totalDays = 365; // Approximate
                const progressPercentage = ((totalDays - days) / totalDays) * 100;
                const circumference = 2 * Math.PI * 50;
                const offset = circumference - (progressPercentage / 100) * circumference;
                
                const progressRing = document.getElementById('days-progress');
                if (progressRing) {
                    progressRing.style.strokeDasharray = circumference;
                    progressRing.style.strokeDashoffset = offset;
                }
                
                document.getElementById('days-percentage').textContent = `${Math.round(progressPercentage)}%`;
                
                // Add pulse animation to seconds
                const secondsElement = document.getElementById('live-seconds');
                secondsElement.classList.add('pulse');
                setTimeout(() => secondsElement.classList.remove('pulse'), 100);
            }
            
            // Update current time with more precision
            const timeOptions = {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true,
                timeZone: 'Australia/Brisbane'
            };
            document.getElementById('current-time').textContent = now.toLocaleTimeString('en-AU', timeOptions);
            document.getElementById('last-updated').textContent = now.toLocaleTimeString('en-AU', timeOptions);
        }
        
        // Enhanced stats loading with advanced metrics
        function loadAdvancedStats() {
            fetch('/api/stats')
                .then(response => response.json())
                .then(data => {
                    // Basic stats
                    document.getElementById('days-left').textContent = data.daysLeft;
                    document.getElementById('school-days').textContent = data.schoolDays;
                    document.getElementById('weeks-left').textContent = data.weeks;
                    document.getElementById('months-left').textContent = data.months;
                    
                    // Advanced stats
                    document.getElementById('completion-percentage').textContent = data.completionPercentage + '%';
                    document.getElementById('motivation-score').textContent = data.motivationScore + '/100';
                    document.getElementById('streak-days').textContent = data.streakDays + ' days';
                    document.getElementById('readiness-score').textContent = data.readinessScore + '%';
                    
                    // Update readiness indicator
                    const readinessIndicator = document.getElementById('readiness-indicator');
                    if (data.readinessScore >= 90) {
                        readinessIndicator.className = 'performance-indicator indicator-excellent';
                        readinessIndicator.innerHTML = '<i class="fas fa-star"></i> Excellent';
                    } else if (data.readinessScore >= 70) {
                        readinessIndicator.className = 'performance-indicator indicator-good';
                        readinessIndicator.innerHTML = '<i class="fas fa-thumbs-up"></i> Good';
                    } else {
                        readinessIndicator.className = 'performance-indicator indicator-warning';
                        readinessIndicator.innerHTML = '<i class="fas fa-exclamation"></i> Needs Focus';
                    }
                    
                    // Update milestone progress
                    document.getElementById('milestone-percentage').textContent = data.milestoneProgress + '%';
                    document.getElementById('study-goal-percentage').textContent = data.studyGoalProgress + '%';
                })
                .catch(error => {
                    console.error('Error fetching stats:', error);
                    showNotification('Error loading stats', 'error');
                });
        }
        
        // Weather functionality
        function loadWeather() {
            // Mock weather data for Brisbane
            const weatherData = {
                temperature: Math.floor(Math.random() * 15) + 20, // 20-35°C
                description: ['Sunny', 'Partly Cloudy', 'Clear Skies', 'Warm'][Math.floor(Math.random() * 4)],
                humidity: Math.floor(Math.random() * 30) + 50 // 50-80%
            };
            
            document.getElementById('weather-temp').textContent = `${weatherData.temperature}°C`;
            document.getElementById('weather-desc').textContent = weatherData.description;
            document.getElementById('weather-humidity').textContent = `Humidity: ${weatherData.humidity}%`;
        }
        
        // Global chart instances to prevent duplicates
        let chartInstances = {};
        let chartsInitialized = false;
        
        // Charts initialization
        function initializeCharts() {
            // Only initialize once
            if (chartsInitialized) {
                return;
            }
            
            // Destroy existing charts first (just in case)
            Object.values(chartInstances).forEach(chart => {
                if (chart) {
                    try {
                        chart.destroy();
                    } catch (error) {
                        console.error('Error destroying chart:', error);
                    }
                }
            });
            chartInstances = {};
            
            // Progress Chart
            const progressCtx = document.getElementById('progressChart');
            if (progressCtx) {
                try {
                    chartInstances.progressChart = new Chart(progressCtx.getContext('2d'), {
                        type: 'line',
                        data: {
                            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov'],
                            datasets: [{
                                label: 'Academic Progress',
                                data: [65, 70, 75, 78, 82, 85, 87, 90, 92, 94, 96],
                                borderColor: '#5865f2',
                                backgroundColor: 'rgba(88, 101, 242, 0.1)',
                                tension: 0.4,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    labels: { color: '#dcddde' }
                                }
                            },
                            scales: {
                                y: { 
                                    ticks: { color: '#dcddde' },
                                    grid: { color: '#4f545c' }
                                },
                                x: { 
                                    ticks: { color: '#dcddde' },
                                    grid: { color: '#4f545c' }
                                }
                            }
                        }
                    });
                } catch (error) {
                    console.error('Error creating progress chart:', error);
                }
            }
            
            // Performance Chart (Analytics Section)
            const performanceCtx = document.getElementById('performanceChart');
            if (performanceCtx) {
                try {
                    chartInstances.performanceChart = new Chart(performanceCtx.getContext('2d'), {
                        type: 'radar',
                        data: {
                            labels: ['Study Hours', 'Assignment Quality', 'Test Scores', 'Attendance', 'Engagement', 'Time Management'],
                            datasets: [{
                                label: 'Current Performance',
                                data: [85, 92, 88, 95, 90, 87],
                                borderColor: '#26de81',
                                backgroundColor: 'rgba(38, 222, 129, 0.2)',
                                pointBackgroundColor: '#26de81'
                            }, {
                                label: 'Target Performance',
                                data: [90, 95, 92, 98, 95, 90],
                                borderColor: '#fd79a8',
                                backgroundColor: 'rgba(253, 121, 168, 0.1)',
                                pointBackgroundColor: '#fd79a8'
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    labels: { color: '#dcddde' }
                                }
                            },
                            scales: {
                                r: {
                                    ticks: { color: '#dcddde' },
                                    grid: { color: '#4f545c' },
                                    pointLabels: { color: '#dcddde' }
                                }
                            }
                        }
                    });
                } catch (error) {
                    console.error('Error creating performance chart:', error);
                }
            }
            
            // Time Distribution Chart
            const timeCtx = document.getElementById('timeDistributionChart');
            if (timeCtx) {
                try {
                    chartInstances.timeDistributionChart = new Chart(timeCtx.getContext('2d'), {
                        type: 'doughnut',
                        data: {
                            labels: ['Study', 'Assignments', 'Research', 'Review', 'Breaks'],
                            datasets: [{
                                data: [35, 25, 20, 15, 5],
                                backgroundColor: ['#5865f2', '#26de81', '#fd79a8', '#f7b731', '#a55eea']
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    labels: { color: '#dcddde' }
                                }
                            }
                        }
                    });
                } catch (error) {
                    console.error('Error creating time distribution chart:', error);
                }
            }
            
            // Initialize mini charts
            initializeMiniCharts();
            
            // Mark as initialized
            chartsInitialized = true;
        }
        
        function initializeMiniCharts() {
            // Only initialize mini charts if they don't exist
            
            // School days mini chart
            const schoolCtx = document.getElementById('school-days-chart');
            if (schoolCtx && !chartInstances.schoolChart) {
                try {
                    chartInstances.schoolChart = new Chart(schoolCtx.getContext('2d'), {
                        type: 'line',
                        data: {
                            labels: ['', '', '', '', '', '', ''],
                            datasets: [{
                                data: [180, 160, 140, 120, 100, 80, 60],
                                borderColor: '#4ecdc4',
                                borderWidth: 2,
                                pointRadius: 0,
                                tension: 0.4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } },
                            scales: {
                                x: { display: false },
                                y: { display: false }
                            },
                            animation: false, // Disable animations to prevent re-rendering
                            interaction: { intersect: false },
                            elements: { point: { radius: 0 } },
                            layout: { padding: 0 },
                            onResize: null // Disable resize handlers
                        }
                    });
                } catch (error) {
                    console.error('Error creating school days chart:', error);
                }
            }
            
            // Weeks mini chart
            const weeksCtx = document.getElementById('weeks-chart');
            if (weeksCtx && !chartInstances.weeksChart) {
                try {
                    chartInstances.weeksChart = new Chart(weeksCtx.getContext('2d'), {
                        type: 'bar',
                        data: {
                            labels: ['', '', '', '', '', '', ''],
                            datasets: [{
                                data: [52, 45, 38, 31, 24, 17, 10],
                                backgroundColor: '#45b7d1'
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } },
                            scales: {
                                x: { display: false },
                                y: { display: false }
                            },
                            animation: false, // Disable animations to prevent re-rendering
                            interaction: { intersect: false },
                            elements: { point: { radius: 0 } },
                            layout: { padding: 0 },
                            onResize: null // Disable resize handlers
                        }
                    });
                } catch (error) {
                    console.error('Error creating weeks chart:', error);
                }
            }
        }
        
        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `alert alert-${type} position-fixed top-0 end-0 m-3`;
            notification.style.zIndex = '9999';
            notification.style.minWidth = '300px';
            notification.innerHTML = `
                <div class="d-flex align-items-center">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'} me-2"></i>
                    ${message}
                    <button type="button" class="btn-close ms-auto" onclick="this.parentElement.parentElement.remove()"></button>
                </div>
            `;
            document.body.appendChild(notification);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }
        
        // Quick action functions
        function sendMotivationMessage() {
            showNotification('Motivation message sent to Discord!', 'success');
        }
        
        function checkMilestones() {
            showNotification('Checking milestones... 3 achievements ready!', 'info');
        }
        
        function generateReport() {
            showNotification('Generating comprehensive progress report...', 'info');
            setTimeout(() => {
                showNotification('Report generated successfully!', 'success');
            }, 2000);
        }
        
        function backupData() {
            showNotification('Creating secure backup...', 'info');
            setTimeout(() => {
                showNotification('Backup completed successfully!', 'success');
            }, 1500);
        }
        
        function refreshActivity() {
            showNotification('Activity feed refreshed!', 'success');
        }
        
        function exportData() {
            showNotification('Exporting dashboard data...', 'info');
            setTimeout(() => {
                showNotification('Data exported to CSV!', 'success');
            }, 1000);
        }
        
        // Section-specific loading functions
        function loadGoals() {
            const goalsContainer = document.getElementById('goals-container');
            if (goalsContainer && goalsContainer.innerHTML.trim() === '') {
                goalsContainer.innerHTML = `
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="milestone-progress">
                                <div class="d-flex justify-content-between">
                                    <span><i class="fas fa-book me-2"></i>Complete Final Projects</span>
                                    <span>85%</span>
                                </div>
                                <div class="milestone-bar">
                                    <div class="milestone-bar-fill" style="width: 85%"></div>
                                </div>
                                <small class="text-muted">Due: December 15, 2024</small>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="milestone-progress">
                                <div class="d-flex justify-content-between">
                                    <span><i class="fas fa-graduation-cap me-2"></i>Thesis Defense</span>
                                    <span>60%</span>
                                </div>
                                <div class="milestone-bar">
                                    <div class="milestone-bar-fill" style="width: 60%"></div>
                                </div>
                                <small class="text-muted">Scheduled: March 2025</small>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="milestone-progress">
                                <div class="d-flex justify-content-between">
                                    <span><i class="fas fa-certificate me-2"></i>Industry Certification</span>
                                    <span>40%</span>
                                </div>
                                <div class="milestone-bar">
                                    <div class="milestone-bar-fill" style="width: 40%"></div>
                                </div>
                                <small class="text-muted">Target: February 2025</small>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="milestone-progress">
                                <div class="d-flex justify-content-between">
                                    <span><i class="fas fa-briefcase me-2"></i>Job Applications</span>
                                    <span>25%</span>
                                </div>
                                <div class="milestone-bar">
                                    <div class="milestone-bar-fill" style="width: 25%"></div>
                                </div>
                                <small class="text-muted">Ongoing process</small>
                            </div>
                        </div>
                    </div>
                `;
            }
        }
        
        function loadMilestones() {
            const milestonesContainer = document.getElementById('milestones-container');
            if (milestonesContainer && milestonesContainer.innerHTML.trim() === '') {
                milestonesContainer.innerHTML = `
                    <div class="timeline">
                        <div class="timeline-item completed">
                            <div class="timeline-marker bg-success"></div>
                            <div class="timeline-content">
                                <h6><i class="fas fa-check-circle text-success me-2"></i>Enrollment Complete</h6>
                                <p class="text-muted">Successfully enrolled in graduation program</p>
                                <small>Completed: January 2022</small>
                            </div>
                        </div>
                        <div class="timeline-item completed">
                            <div class="timeline-marker bg-success"></div>
                            <div class="timeline-content">
                                <h6><i class="fas fa-check-circle text-success me-2"></i>Core Subjects</h6>
                                <p class="text-muted">Completed all core subject requirements</p>
                                <small>Completed: December 2023</small>
                            </div>
                        </div>
                        <div class="timeline-item active">
                            <div class="timeline-marker bg-primary"></div>
                            <div class="timeline-content">
                                <h6><i class="fas fa-clock text-primary me-2"></i>Final Semester</h6>
                                <p class="text-muted">Currently in final semester of studies</p>
                                <small>In Progress: 2024</small>
                            </div>
                        </div>
                        <div class="timeline-item pending">
                            <div class="timeline-marker bg-secondary"></div>
                            <div class="timeline-content">
                                <h6><i class="fas fa-hourglass-half text-secondary me-2"></i>Final Exams</h6>
                                <p class="text-muted">Complete all final examinations</p>
                                <small>Scheduled: November 2024</small>
                            </div>
                        </div>
                        <div class="timeline-item pending">
                            <div class="timeline-marker bg-warning"></div>
                            <div class="timeline-content">
                                <h6><i class="fas fa-graduation-cap text-warning me-2"></i>Graduation Ceremony</h6>
                                <p class="text-muted">The big day arrives!</p>
                                <small>Target: November 21, 2025</small>
                            </div>
                        </div>
                    </div>
                    
                    <style>
                        .timeline {
                            position: relative;
                            padding-left: 30px;
                        }
                        .timeline::before {
                            content: '';
                            position: absolute;
                            left: 15px;
                            top: 0;
                            bottom: 0;
                            width: 2px;
                            background: #4f545c;
                        }
                        .timeline-item {
                            position: relative;
                            margin-bottom: 30px;
                        }
                        .timeline-marker {
                            position: absolute;
                            left: -22px;
                            top: 0;
                            width: 14px;
                            height: 14px;
                            border-radius: 50%;
                            border: 3px solid #2f3136;
                        }
                        .timeline-content {
                            background: #40444b;
                            padding: 15px;
                            border-radius: 8px;
                            border-left: 3px solid #5865f2;
                        }
                        .timeline-item.completed .timeline-content {
                            border-left-color: #28a745;
                        }
                        .timeline-item.active .timeline-content {
                            border-left-color: #007bff;
                        }
                        .timeline-item.pending .timeline-content {
                            border-left-color: #6c757d;
                            opacity: 0.8;
                        }
                    </style>
                `;
            }
        }
        
        function loadLogs() {
            const logsContainer = document.getElementById('logs-container');
            if (logsContainer && logsContainer.innerHTML.trim() === '') {
                const logs = [
                    { time: '2024-01-15 14:32:15', level: 'INFO', message: 'Dashboard accessed by admin user' },
                    { time: '2024-01-15 14:30:45', level: 'SUCCESS', message: 'Daily countdown message sent successfully' },
                    { time: '2024-01-15 14:28:12', level: 'INFO', message: 'Stats refreshed automatically' },
                    { time: '2024-01-15 14:25:33', level: 'WARNING', message: 'High memory usage detected (78%)' },
                    { time: '2024-01-15 14:20:00', level: 'SUCCESS', message: 'Data backup completed successfully' },
                    { time: '2024-01-15 14:15:22', level: 'INFO', message: 'User milestone progress updated' },
                    { time: '2024-01-15 14:10:45', level: 'ERROR', message: 'API rate limit reached for weather service' },
                    { time: '2024-01-15 14:05:18', level: 'SUCCESS', message: 'Bot reconnected to Discord successfully' }
                ];
                
                logsContainer.innerHTML = logs.map(log => `
                    <div class="log-entry mb-2 p-2" style="background: #40444b; border-radius: 6px; border-left: 3px solid ${
                        log.level === 'SUCCESS' ? '#28a745' : 
                        log.level === 'WARNING' ? '#ffc107' : 
                        log.level === 'ERROR' ? '#dc3545' : '#17a2b8'
                    };">
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="log-level badge bg-${
                                log.level === 'SUCCESS' ? 'success' : 
                                log.level === 'WARNING' ? 'warning' : 
                                log.level === 'ERROR' ? 'danger' : 'info'
                            }">${log.level}</span>
                            <small class="text-muted">${log.time}</small>
                        </div>
                        <div class="log-message mt-1">${log.message}</div>
                    </div>
                `).join('');
            }
        }
        
        function clearLogs() {
            document.getElementById('logs-container').innerHTML = '<p class="text-muted text-center">Logs cleared</p>';
            showNotification('Activity logs cleared', 'success');
        }
        
        function addNewGoal() {
            showNotification('New goal creation dialog would open here', 'info');
        }
        
        // Enhanced section switching
        function showSection(section) {
            // Hide all sections
            const sections = ['overview', 'analytics', 'goals', 'study', 'milestones', 'calendar', 'settings', 'logs'];
            sections.forEach(s => {
                const sectionElement = document.getElementById(s + '-section');
                if (sectionElement) {
                    sectionElement.style.display = 'none';
                }
            });
            
            // Remove active class from all menu items
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Add active class to clicked item
            if (event && event.target) {
                let menuItem = event.target;
                if (!menuItem.classList.contains('menu-item')) {
                    menuItem = menuItem.closest('.menu-item');
                }
                if (menuItem) {
                    menuItem.classList.add('active');
                }
            }
            
            // Show the selected section
            const sectionElement = document.getElementById(section + '-section');
            if (sectionElement) {
                sectionElement.style.display = 'block';
            }
            
            // Load section-specific content
            switch(section) {
                case 'goals':
                    loadGoals();
                    break;
                case 'milestones':
                    loadMilestones();
                    break;
                case 'logs':
                    loadLogs();
                    break;
                case 'analytics':
                    // Initialize charts for analytics section if not already done
                    if (!chartsInitialized) {
                        setTimeout(() => {
                            initializeCharts();
                        }, 100);
                    }
                    break;
            }
        }
        
        // Initialize everything
        function initializeDashboard() {
            loadAdvancedStats();
            loadWeather();
            updateEnhancedCountdown();
            
            // Initialize charts only once with a delay to ensure DOM is ready
            setTimeout(() => {
                if (!chartsInitialized) {
                    initializeCharts();
                }
            }, 200);
            
            // Set up intervals
            setInterval(updateEnhancedCountdown, 50); // 50ms for smooth milliseconds
            setInterval(loadAdvancedStats, 30000); // 30 seconds
            setInterval(loadWeather, 300000); // 5 minutes
        }
        
        // Track if dashboard is already initialized
        let dashboardInitialized = false;
        
        // Start everything when page loads
        window.addEventListener('load', function() {
            if (!dashboardInitialized) {
                initializeDashboard();
                dashboardInitialized = true;
            }
        });
        
        // Legacy functions for compatibility
        function refreshStats() {
            loadAdvancedStats();
        }
        
        function updateLiveCountdown() {
            updateEnhancedCountdown();
        }
    </script>
</body>
</html>
